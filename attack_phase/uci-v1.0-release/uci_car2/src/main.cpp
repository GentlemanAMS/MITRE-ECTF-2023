#include <Arduino.h>
#include "driverlib/uart.h"


int32_t uart_read(uint32_t uart_port, uint8_t* buffer, uint32_t buffer_length, uint32_t timeout)
{
    uint32_t bytes_read = 0;
    uint32_t start_read_time = millis();

    while((millis() < start_read_time + timeout) && bytes_read < buffer_length){
        if (!UARTCharsAvail(uart_port)) continue;
        buffer[bytes_read] = (uint8_t)UARTCharGet(uart_port);
        bytes_read++;
    }
    if (bytes_read == buffer_length) return 0;
    else return -1;
}


void uart_write(uint32_t uart_port, uint8_t* buffer, uint32_t buffer_length)
{
    uint32_t i;
    for (i = 0; i < buffer_length; i++)
        UARTCharPut(uart_port, buffer[i]);
}

/*
int i = 0;

void setup() {
  // put your setup code here, to run once:
  Serial.begin(115200);
  Serial1.begin(115200);
  
  Serial.println("uint8_t fob_to_car[][18] = {");
  i = 0;
}

uint8_t send_nonce[3] = {87, 1, 0};
uint8_t receive_hash[18];

void loop() {
  // put your main code here, to run repeatedly:

  if (i < 256)
  {
    send_nonce[0] = 87;
    send_nonce[1] = 1;
    send_nonce[2] = i;
    uart_write(UART1_BASE, send_nonce, 3);

    int result = uart_read(UART1_BASE, receive_hash, 2, 100);
    if (result == -1) return;
    int bytes_to_read = receive_hash[1];
    Serial.print("  {");
    uart_read(UART1_BASE, receive_hash+2, bytes_to_read, 10000000);
    for (int ii = 0; ii < 17; ii++)
    {
      Serial.print(receive_hash[ii]);
      Serial.print(", ");
    }
    Serial.print(receive_hash[17]);
    Serial.println("},");
    i++;
  }
  else{
    delay(1000);
  }
  if (i==256)
    Serial.println("};");
}
*/


uint8_t fob_to_car[][18] = {
  {86, 16, 202, 114, 193, 18, 186, 146, 46, 175, 251, 72, 202, 175, 203, 21, 136, 175},
  {86, 16, 139, 219, 205, 164, 29, 154, 152, 3, 135, 124, 105, 125, 226, 237, 26, 194},
  {86, 16, 195, 243, 33, 202, 182, 155, 234, 11, 147, 141, 150, 160, 60, 103, 108, 57},
  {86, 16, 231, 28, 164, 13, 112, 250, 168, 93, 105, 158, 86, 60, 175, 207, 204, 169},
  {86, 16, 164, 208, 109, 152, 129, 188, 1, 48, 174, 15, 115, 156, 39, 201, 168, 115},
  {86, 16, 12, 132, 53, 30, 216, 102, 44, 163, 246, 159, 163, 182, 9, 57, 231, 212},
  {86, 16, 189, 73, 116, 138, 164, 217, 139, 40, 85, 138, 53, 141, 248, 102, 14, 186},
  {86, 16, 88, 58, 235, 97, 98, 217, 221, 61, 131, 72, 252, 208, 64, 197, 207, 37},
  {86, 16, 183, 41, 240, 107, 134, 178, 155, 196, 227, 158, 221, 244, 43, 131, 161, 49},
  {86, 16, 114, 136, 5, 205, 182, 86, 13, 63, 211, 225, 145, 90, 34, 44, 17, 16},
  {86, 16, 82, 76, 75, 17, 77, 80, 12, 121, 190, 239, 192, 145, 70, 17, 74, 246},
  {86, 16, 153, 58, 125, 117, 27, 19, 25, 177, 3, 192, 233, 239, 123, 4, 170, 14},
  {86, 16, 23, 130, 74, 107, 49, 14, 246, 208, 109, 173, 185, 153, 175, 25, 168, 228},
  {86, 16, 237, 144, 246, 176, 48, 225, 1, 124, 52, 246, 210, 221, 223, 181, 5, 131},
  {86, 16, 210, 19, 172, 176, 248, 231, 67, 129, 92, 234, 24, 62, 211, 152, 139, 4},
  {86, 16, 16, 6, 164, 1, 46, 142, 16, 67, 24, 48, 254, 152, 170, 46, 113, 77},
  {86, 16, 181, 68, 32, 230, 198, 63, 71, 204, 97, 94, 195, 107, 245, 145, 230, 176},
  {86, 16, 151, 193, 10, 240, 82, 228, 242, 166, 56, 239, 93, 90, 62, 247, 33, 96},
  {86, 16, 200, 33, 69, 6, 232, 180, 157, 90, 25, 137, 253, 24, 182, 17, 206, 32},
  {86, 16, 76, 165, 73, 183, 243, 196, 168, 92, 52, 216, 78, 241, 18, 183, 212, 35},
  {86, 16, 86, 37, 32, 112, 144, 155, 245, 198, 220, 46, 99, 9, 180, 203, 170, 206},
  {86, 16, 12, 226, 35, 71, 229, 20, 72, 8, 160, 228, 247, 122, 99, 101, 250, 114},
  {86, 14, 51, 224, 169, 27, 213, 37, 107, 140, 89, 123, 37, 232, 229, 103, 250, 114},
  {86, 16, 240, 87, 127, 93, 73, 124, 58, 201, 205, 97, 190, 105, 184, 170, 175, 84},
  {86, 16, 185, 35, 36, 157, 107, 134, 72, 83, 14, 247, 201, 75, 156, 8, 65, 236},
  {86, 16, 28, 66, 199, 171, 185, 150, 185, 116, 112, 143, 165, 248, 244, 45, 189, 86},
  {86, 16, 219, 22, 232, 88, 93, 56, 131, 229, 21, 226, 155, 90, 74, 143, 184, 79},
  {86, 16, 251, 3, 212, 82, 210, 209, 174, 69, 100, 146, 77, 217, 85, 83, 152, 201},
  {86, 16, 177, 78, 115, 1, 121, 21, 142, 54, 204, 205, 218, 243, 7, 70, 27, 7},
  {86, 16, 47, 94, 28, 33, 90, 72, 216, 142, 4, 227, 48, 174, 112, 152, 212, 193},
  {86, 16, 48, 119, 152, 140, 80, 94, 175, 100, 198, 134, 182, 126, 248, 61, 182, 20},
  {86, 16, 122, 127, 50, 225, 217, 24, 180, 27, 1, 130, 137, 75, 80, 144, 234, 143},
  {86, 16, 79, 244, 29, 249, 143, 43, 237, 146, 47, 76, 192, 204, 46, 71, 22, 168},
  {86, 16, 133, 245, 222, 114, 21, 215, 29, 226, 234, 196, 186, 78, 173, 1, 15, 84},
  {86, 16, 13, 31, 88, 120, 230, 110, 8, 201, 145, 31, 220, 62, 131, 20, 187, 208},
  {86, 16, 182, 111, 38, 181, 14, 147, 208, 68, 95, 220, 64, 129, 131, 113, 35, 33},
  {86, 16, 213, 122, 115, 38, 232, 60, 223, 63, 255, 39, 118, 152, 176, 69, 88, 214},
  {86, 16, 221, 177, 6, 253, 204, 245, 83, 158, 230, 172, 236, 127, 250, 7, 162, 22},
  {86, 16, 245, 3, 47, 214, 182, 78, 103, 224, 215, 131, 83, 64, 151, 44, 139, 133},
  {86, 16, 224, 117, 84, 91, 98, 91, 251, 91, 43, 195, 10, 80, 205, 197, 178, 69},
  {86, 16, 97, 187, 33, 79, 239, 128, 184, 129, 10, 134, 14, 186, 170, 22, 26, 101},
  {86, 16, 24, 188, 128, 192, 142, 151, 4, 17, 68, 49, 193, 4, 250, 167, 62, 49},
  {86, 16, 70, 23, 192, 222, 98, 168, 146, 86, 204, 32, 127, 188, 103, 153, 35, 7},
  {86, 16, 115, 201, 131, 217, 237, 63, 228, 242, 247, 143, 34, 169, 109, 196, 154, 159},
  {86, 16, 221, 97, 244, 166, 241, 11, 188, 119, 8, 59, 39, 8, 142, 132, 236, 47},
  {86, 16, 253, 4, 91, 103, 128, 21, 240, 157, 180, 195, 242, 139, 87, 95, 8, 128},
  {86, 16, 64, 124, 239, 51, 21, 116, 251, 185, 173, 215, 59, 249, 129, 166, 57, 236},
  {86, 16, 50, 15, 119, 133, 14, 27, 172, 96, 105, 131, 242, 85, 225, 198, 206, 188},
  {86, 16, 166, 134, 234, 25, 206, 164, 207, 123, 78, 208, 244, 93, 142, 135, 138, 205},
  {86, 16, 166, 159, 143, 39, 224, 161, 101, 62, 117, 81, 121, 94, 25, 79, 25, 156},
  {86, 16, 190, 124, 97, 110, 240, 110, 152, 172, 40, 126, 5, 14, 228, 80, 83, 213},
  {86, 16, 164, 91, 63, 106, 190, 8, 66, 62, 74, 130, 107, 85, 179, 188, 83, 225},
  {86, 16, 208, 32, 133, 166, 247, 204, 243, 191, 45, 197, 156, 113, 92, 183, 25, 81},
  {86, 16, 41, 63, 87, 140, 152, 111, 189, 203, 118, 247, 102, 18, 146, 5, 166, 240},
  {86, 16, 201, 8, 10, 214, 161, 33, 6, 247, 250, 56, 157, 6, 97, 111, 236, 171},
  {86, 16, 110, 139, 185, 25, 242, 117, 182, 86, 26, 139, 28, 230, 26, 5, 9, 155},
  {86, 16, 100, 190, 169, 169, 158, 48, 109, 232, 223, 14, 237, 11, 216, 169, 113, 238},
  {86, 16, 10, 1, 13, 110, 146, 67, 254, 174, 20, 177, 89, 128, 193, 25, 249, 250},
  {86, 16, 233, 68, 77, 135, 248, 250, 246, 236, 202, 95, 102, 92, 138, 51, 147, 169},
  {86, 16, 216, 214, 86, 53, 195, 71, 188, 61, 65, 222, 57, 127, 228, 222, 82, 150},
  {86, 16, 162, 123, 141, 234, 85, 31, 131, 219, 25, 49, 4, 126, 78, 185, 84, 147},
  {86, 9, 225, 165, 178, 69, 77, 51, 221, 104, 203, 49, 4, 126, 78, 185, 84, 147},
  {86, 16, 240, 88, 204, 240, 252, 44, 6, 223, 34, 181, 161, 169, 249, 22, 4, 159},
  {86, 16, 117, 42, 199, 112, 187, 252, 173, 242, 170, 13, 149, 133, 204, 216, 37, 42},
  {86, 16, 32, 47, 102, 205, 241, 123, 203, 63, 246, 72, 173, 167, 60, 43, 47, 150},
  {86, 16, 2, 99, 214, 213, 123, 107, 21, 88, 122, 194, 147, 235, 45, 173, 23, 158},
  {86, 16, 18, 205, 15, 115, 165, 138, 222, 94, 100, 201, 35, 219, 123, 109, 171, 195},
  {86, 16, 248, 194, 72, 222, 214, 117, 157, 172, 134, 199, 127, 214, 15, 161, 230, 87},
  {86, 16, 75, 25, 211, 246, 42, 50, 59, 144, 65, 37, 213, 22, 174, 36, 152, 135},
  {86, 16, 87, 191, 254, 164, 133, 98, 6, 127, 27, 11, 119, 222, 83, 129, 184, 23},
  {86, 16, 15, 14, 17, 220, 60, 40, 7, 231, 235, 173, 73, 19, 97, 58, 225, 130},
  {86, 16, 249, 117, 148, 8, 30, 32, 217, 242, 224, 31, 179, 202, 168, 242, 232, 162},
  {86, 16, 51, 49, 193, 219, 213, 47, 14, 138, 136, 52, 37, 169, 50, 118, 106, 75},
  {86, 16, 136, 94, 73, 31, 17, 76, 205, 158, 234, 160, 64, 50, 222, 163, 181, 204},
  {86, 16, 211, 9, 161, 83, 154, 156, 117, 65, 79, 69, 98, 44, 220, 248, 178, 179},
  {86, 16, 91, 44, 174, 75, 252, 140, 11, 251, 161, 197, 206, 168, 84, 181, 52, 45},
  {86, 16, 14, 171, 45, 152, 17, 129, 108, 69, 102, 71, 218, 157, 147, 226, 120, 170},
  {86, 16, 147, 199, 179, 206, 172, 119, 193, 250, 137, 125, 71, 18, 139, 18, 121, 221},
  {86, 16, 236, 171, 17, 188, 103, 161, 7, 169, 208, 108, 213, 169, 221, 67, 120, 93},
  {86, 16, 254, 188, 249, 97, 203, 215, 162, 19, 113, 8, 36, 253, 217, 129, 188, 85},
  {86, 16, 150, 98, 16, 28, 31, 121, 79, 164, 15, 240, 58, 214, 168, 156, 85, 67},
  {86, 16, 168, 173, 103, 28, 198, 78, 3, 188, 72, 166, 85, 72, 110, 4, 201, 25},
  {86, 4, 72, 147, 4, 226, 198, 78, 3, 188, 72, 166, 85, 72, 110, 4, 201, 25},
  {86, 16, 250, 221, 76, 133, 176, 166, 130, 64, 252, 90, 76, 239, 61, 140, 178, 90},
  {86, 16, 19, 174, 64, 114, 243, 156, 120, 193, 191, 27, 188, 81, 82, 75, 81, 22},
  {86, 16, 139, 244, 43, 39, 180, 2, 223, 75, 191, 220, 18, 161, 32, 229, 134, 110},
  {86, 16, 179, 131, 47, 154, 156, 18, 252, 199, 208, 12, 233, 112, 59, 147, 246, 179},
  {86, 16, 163, 115, 187, 107, 156, 57, 169, 93, 254, 165, 45, 45, 211, 8, 128, 144},
  {86, 16, 168, 2, 247, 77, 157, 33, 137, 163, 178, 35, 161, 201, 246, 212, 14, 180},
  {86, 16, 211, 182, 159, 26, 79, 249, 255, 250, 231, 13, 186, 8, 85, 106, 196, 105},
  {86, 16, 8, 55, 153, 74, 198, 79, 38, 103, 47, 120, 29, 120, 212, 4, 194, 35},
  {86, 16, 34, 66, 126, 57, 179, 109, 231, 3, 48, 75, 241, 13, 75, 8, 244, 160},
  {86, 8, 143, 50, 192, 201, 150, 106, 47, 235, 48, 75, 241, 13, 75, 8, 244, 160},
  {86, 16, 192, 134, 87, 108, 141, 68, 203, 247, 144, 195, 201, 201, 242, 72, 244, 188},
  {86, 16, 69, 163, 251, 207, 249, 37, 42, 206, 88, 72, 243, 137, 142, 245, 228, 30},
  {86, 16, 144, 228, 31, 86, 80, 175, 202, 229, 204, 17, 80, 164, 37, 135, 243, 48},
  {86, 16, 200, 41, 77, 11, 99, 72, 152, 2, 29, 163, 214, 224, 52, 3, 24, 199},
  {86, 16, 184, 217, 244, 190, 85, 76, 107, 95, 246, 172, 107, 61, 85, 11, 229, 229},
  {86, 16, 36, 199, 28, 188, 227, 116, 167, 185, 193, 193, 67, 179, 229, 11, 64, 168},
  {86, 16, 93, 101, 210, 32, 158, 12, 88, 92, 254, 226, 216, 202, 65, 44, 119, 13},
  {86, 16, 146, 110, 169, 246, 49, 185, 166, 53, 11, 22, 32, 145, 109, 86, 211, 67},
  {86, 16, 249, 34, 206, 112, 220, 68, 178, 172, 140, 91, 85, 34, 29, 194, 105, 248},
  {86, 16, 52, 140, 28, 216, 252, 28, 193, 48, 37, 61, 177, 175, 228, 235, 122, 46},
  {86, 16, 91, 34, 160, 219, 235, 8, 19, 169, 32, 254, 54, 210, 154, 242, 215, 199},
  {86, 16, 123, 184, 107, 213, 200, 95, 183, 114, 46, 133, 94, 208, 155, 13, 120, 63},
  {86, 16, 145, 92, 60, 105, 204, 174, 10, 176, 25, 30, 182, 218, 152, 150, 54, 159},
  {86, 16, 48, 93, 48, 169, 150, 110, 38, 29, 22, 223, 87, 17, 126, 222, 69, 81},
  {86, 16, 175, 21, 56, 87, 207, 139, 225, 167, 166, 21, 22, 42, 139, 149, 112, 156},
  {86, 16, 217, 143, 98, 69, 18, 71, 184, 73, 60, 96, 181, 36, 91, 147, 232, 49},
  {86, 16, 212, 182, 69, 131, 84, 17, 221, 32, 206, 186, 187, 145, 154, 233, 215, 239},
  {86, 16, 4, 157, 88, 15, 30, 174, 102, 189, 45, 21, 193, 208, 233, 137, 7, 193},
  {86, 16, 87, 235, 27, 12, 216, 37, 58, 41, 89, 81, 116, 232, 66, 168, 242, 44},
  {86, 16, 152, 43, 92, 247, 46, 154, 140, 13, 63, 242, 130, 196, 79, 97, 124, 1},
  {86, 16, 107, 43, 30, 203, 121, 201, 72, 198, 183, 151, 10, 157, 200, 122, 26, 176},
  {86, 16, 107, 186, 175, 29, 47, 228, 207, 220, 120, 158, 109, 53, 114, 95, 28, 94},
  {86, 16, 145, 217, 192, 156, 53, 55, 93, 126, 69, 223, 156, 174, 210, 167, 8, 100},
  {86, 16, 111, 112, 93, 173, 227, 40, 46, 176, 187, 40, 140, 61, 231, 57, 207, 136},
  {86, 16, 133, 98, 232, 168, 74, 186, 205, 231, 118, 70, 209, 176, 171, 61, 51, 120},
  {86, 16, 195, 107, 177, 132, 201, 17, 156, 105, 193, 127, 247, 33, 237, 161, 129, 100},
  {86, 16, 71, 118, 49, 11, 205, 186, 208, 126, 195, 36, 246, 71, 122, 238, 243, 251},
  {86, 16, 190, 100, 49, 254, 43, 227, 131, 235, 132, 16, 52, 73, 193, 163, 157, 40},
  {86, 16, 63, 119, 223, 110, 100, 232, 155, 232, 113, 196, 248, 211, 84, 97, 40, 20},
  {86, 16, 137, 55, 116, 136, 18, 237, 241, 168, 166, 198, 175, 253, 105, 57, 165, 42},
  {86, 16, 201, 233, 191, 118, 50, 169, 61, 127, 136, 220, 249, 135, 30, 5, 11, 218},
  {86, 16, 161, 185, 28, 34, 220, 174, 100, 170, 97, 225, 210, 222, 115, 23, 134, 171},
  {86, 16, 208, 52, 240, 191, 100, 165, 246, 172, 137, 208, 88, 43, 35, 55, 4, 49},
  {86, 16, 32, 55, 207, 51, 66, 240, 134, 118, 178, 219, 78, 198, 142, 51, 243, 141},
  {86, 16, 112, 56, 127, 83, 252, 250, 115, 14, 76, 46, 154, 189, 250, 217, 118, 76},
  {86, 16, 227, 132, 5, 183, 39, 146, 214, 82, 233, 21, 163, 234, 43, 221, 175, 54},
  {86, 16, 65, 102, 110, 147, 99, 54, 199, 126, 109, 16, 73, 54, 169, 202, 60, 150},
  {86, 16, 42, 209, 207, 96, 76, 212, 167, 118, 65, 77, 104, 225, 87, 35, 144, 6},
  {86, 16, 134, 43, 38, 24, 11, 238, 82, 242, 204, 2, 57, 42, 28, 205, 53, 228},
  {86, 16, 53, 163, 154, 153, 211, 159, 221, 239, 143, 146, 184, 31, 64, 136, 170, 160},
  {86, 16, 36, 217, 171, 101, 241, 80, 245, 224, 56, 168, 221, 225, 105, 144, 150, 110},
  {86, 16, 216, 147, 232, 223, 113, 251, 53, 56, 62, 240, 34, 223, 238, 199, 200, 154},
  {86, 16, 247, 109, 133, 143, 132, 242, 35, 126, 161, 89, 33, 170, 251, 63, 214, 10},
  {86, 15, 46, 243, 63, 235, 4, 73, 95, 119, 15, 114, 206, 219, 214, 47, 234, 10},
  {86, 16, 131, 225, 25, 192, 60, 160, 168, 135, 201, 236, 180, 215, 111, 164, 122, 193},
  {86, 16, 19, 189, 156, 206, 223, 245, 106, 179, 194, 158, 44, 188, 161, 149, 21, 20},
  {86, 16, 186, 152, 108, 9, 57, 243, 210, 102, 163, 165, 121, 79, 55, 27, 60, 147},
  {86, 16, 214, 120, 111, 5, 252, 138, 235, 35, 124, 155, 161, 156, 241, 62, 79, 216},
  {86, 16, 194, 183, 30, 31, 159, 1, 188, 25, 141, 104, 246, 198, 191, 244, 55, 99},
  {86, 16, 40, 90, 235, 43, 238, 164, 113, 224, 200, 130, 24, 4, 125, 92, 8, 96},
  {86, 16, 248, 41, 181, 245, 125, 158, 114, 179, 244, 63, 30, 43, 202, 143, 46, 138},
  {86, 16, 185, 104, 214, 113, 215, 155, 72, 145, 109, 156, 155, 43, 151, 64, 119, 8},
  {86, 16, 85, 208, 77, 37, 44, 175, 104, 105, 78, 144, 184, 251, 36, 192, 76, 166},
  {86, 16, 147, 149, 134, 80, 136, 135, 121, 39, 43, 135, 73, 84, 219, 123, 249, 208},
  {86, 16, 56, 134, 159, 147, 76, 199, 183, 58, 1, 172, 172, 203, 22, 54, 56, 152},
  {86, 16, 136, 227, 51, 142, 77, 47, 74, 11, 53, 62, 250, 20, 15, 129, 179, 90},
  {86, 16, 89, 93, 31, 158, 245, 13, 137, 173, 183, 135, 38, 133, 104, 73, 61, 152},
  {86, 16, 33, 33, 75, 125, 168, 50, 71, 208, 131, 101, 144, 177, 107, 169, 77, 91},
  {86, 16, 223, 163, 186, 253, 138, 78, 106, 122, 65, 86, 177, 174, 98, 84, 255, 90},
  {86, 16, 155, 88, 104, 251, 179, 50, 212, 79, 16, 92, 110, 5, 210, 112, 103, 126},
  {86, 16, 100, 165, 131, 189, 156, 127, 118, 182, 119, 247, 203, 96, 26, 182, 38, 106},
  {86, 16, 135, 70, 221, 119, 167, 199, 78, 68, 10, 175, 63, 69, 73, 254, 248, 96},
  {86, 16, 156, 129, 17, 90, 140, 120, 34, 221, 91, 141, 115, 201, 188, 71, 245, 189},
  {86, 16, 33, 242, 194, 238, 85, 130, 128, 237, 127, 107, 116, 94, 205, 41, 165, 246},
  {86, 16, 166, 140, 170, 75, 1, 250, 14, 214, 50, 225, 62, 250, 74, 38, 114, 147},
  {86, 3, 133, 220, 155, 75, 1, 250, 14, 214, 50, 225, 62, 250, 74, 38, 114, 147},
  {86, 4, 151, 100, 52, 233, 1, 250, 14, 214, 50, 225, 62, 250, 74, 38, 114, 147},
  {86, 16, 19, 99, 20, 57, 75, 245, 205, 140, 113, 115, 162, 183, 72, 196, 6, 43},
  {86, 16, 194, 94, 21, 144, 207, 14, 131, 86, 77, 204, 9, 237, 26, 202, 242, 121},
  {86, 16, 190, 97, 65, 250, 77, 152, 9, 109, 232, 229, 76, 77, 226, 7, 188, 135},
  {86, 16, 78, 243, 23, 138, 26, 107, 195, 113, 93, 235, 199, 124, 246, 154, 14, 164},
  {86, 11, 45, 110, 254, 218, 91, 158, 115, 207, 72, 175, 150, 124, 246, 154, 14, 164},
  {86, 16, 205, 227, 76, 188, 53, 132, 127, 96, 162, 105, 9, 229, 165, 107, 145, 191},
  {86, 16, 232, 67, 233, 67, 62, 151, 89, 45, 240, 231, 181, 54, 77, 70, 166, 199},
  {86, 16, 10, 191, 108, 1, 224, 113, 217, 248, 82, 188, 220, 42, 187, 64, 159, 163},
  {86, 16, 43, 82, 147, 14, 59, 237, 33, 223, 92, 205, 211, 153, 30, 246, 96, 199},
  {86, 12, 151, 219, 75, 155, 14, 77, 190, 73, 75, 135, 192, 41, 30, 246, 96, 199},
  {86, 16, 94, 222, 101, 36, 221, 152, 57, 121, 22, 89, 13, 193, 212, 229, 84, 232},
  {86, 16, 116, 216, 203, 198, 220, 204, 213, 201, 163, 1, 231, 95, 179, 121, 68, 181},
  {86, 16, 166, 106, 163, 60, 147, 1, 137, 61, 183, 127, 45, 134, 138, 176, 249, 179},
  {86, 16, 5, 39, 144, 201, 162, 195, 174, 173, 14, 47, 70, 72, 191, 113, 98, 59},
  {86, 16, 36, 199, 176, 73, 13, 33, 79, 16, 221, 20, 110, 174, 14, 246, 248, 222},
  {86, 16, 227, 188, 95, 2, 190, 30, 168, 147, 184, 24, 38, 87, 183, 210, 32, 245},
  {86, 16, 171, 223, 83, 210, 114, 194, 165, 19, 3, 73, 168, 118, 202, 192, 192, 82},
  {86, 16, 11, 182, 124, 143, 174, 48, 198, 180, 211, 96, 58, 248, 173, 127, 13, 209},
  {86, 16, 159, 121, 234, 92, 97, 50, 64, 122, 16, 199, 196, 188, 129, 253, 213, 45},
  {86, 7, 31, 186, 158, 147, 20, 76, 81, 122, 16, 199, 196, 188, 129, 253, 213, 45},
  {86, 16, 102, 78, 14, 156, 219, 135, 123, 123, 45, 110, 22, 90, 96, 3, 155, 45},
  {86, 16, 170, 173, 18, 194, 23, 240, 1, 81, 218, 128, 196, 254, 210, 93, 41, 100},
  {86, 16, 80, 250, 252, 2, 217, 175, 120, 51, 198, 159, 114, 240, 165, 26, 60, 128},
  {86, 16, 49, 29, 54, 72, 1, 19, 85, 134, 187, 190, 34, 103, 75, 223, 3, 20},
  {86, 16, 44, 41, 250, 108, 219, 38, 118, 209, 203, 37, 81, 52, 9, 106, 177, 209},
  {86, 16, 142, 140, 220, 20, 161, 12, 157, 191, 190, 6, 18, 181, 150, 66, 142, 169},
  {86, 16, 1, 70, 195, 47, 119, 134, 13, 34, 240, 135, 198, 225, 234, 235, 53, 69},
  {86, 16, 95, 72, 13, 112, 92, 63, 228, 115, 143, 78, 79, 64, 204, 169, 80, 138},
  {86, 16, 157, 77, 50, 119, 107, 24, 22, 42, 35, 199, 213, 240, 234, 120, 83, 145},
  {86, 16, 43, 86, 203, 96, 75, 83, 60, 171, 218, 237, 161, 129, 180, 152, 135, 58},
  {86, 16, 205, 172, 27, 87, 61, 113, 252, 100, 142, 246, 189, 79, 243, 103, 102, 182},
  {86, 16, 105, 185, 211, 65, 2, 252, 233, 132, 213, 7, 188, 231, 215, 212, 45, 134},
  {86, 16, 12, 67, 66, 31, 111, 60, 73, 93, 74, 249, 102, 206, 191, 218, 41, 204},
  {86, 16, 7, 88, 163, 104, 145, 194, 165, 118, 176, 29, 243, 118, 15, 207, 235, 216},
  {86, 16, 5, 162, 24, 47, 19, 195, 116, 72, 93, 161, 97, 12, 196, 253, 225, 127},
  {86, 16, 241, 131, 222, 146, 249, 156, 171, 7, 7, 223, 194, 48, 179, 193, 3, 248},
  {86, 16, 188, 213, 207, 254, 145, 153, 45, 250, 66, 89, 21, 86, 173, 21, 250, 218},
  {86, 16, 141, 143, 184, 92, 197, 78, 247, 251, 212, 156, 51, 120, 187, 156, 117, 34},
  {86, 16, 193, 55, 83, 153, 40, 123, 195, 149, 57, 222, 35, 134, 44, 96, 109, 206},
  {86, 16, 103, 138, 148, 63, 100, 162, 210, 91, 102, 98, 138, 87, 101, 211, 99, 34},
  {86, 16, 46, 201, 66, 146, 219, 236, 167, 226, 106, 187, 108, 18, 196, 43, 130, 21},
  {86, 16, 168, 230, 221, 86, 54, 144, 224, 143, 252, 187, 172, 231, 67, 90, 168, 56},
  {86, 11, 185, 16, 115, 112, 133, 62, 82, 182, 148, 86, 25, 231, 67, 90, 168, 56},
  {86, 12, 44, 103, 56, 175, 191, 140, 30, 182, 64, 156, 46, 132, 67, 90, 168, 56},
  {86, 16, 135, 147, 50, 220, 255, 159, 180, 204, 107, 176, 67, 219, 139, 255, 88, 84},
  {86, 16, 155, 218, 40, 204, 123, 16, 255, 159, 70, 51, 172, 7, 46, 76, 215, 5},
  {86, 16, 117, 194, 85, 74, 10, 45, 213, 58, 190, 89, 185, 81, 146, 26, 125, 222},
  {86, 16, 38, 22, 178, 206, 16, 211, 137, 234, 239, 87, 3, 187, 196, 181, 115, 207},
  {86, 16, 211, 49, 109, 122, 55, 99, 163, 11, 171, 155, 140, 246, 225, 166, 252, 243},
  {86, 16, 199, 18, 132, 161, 215, 90, 150, 21, 178, 196, 98, 94, 8, 89, 10, 50},
  {86, 16, 68, 196, 228, 205, 237, 188, 121, 150, 48, 171, 99, 255, 2, 45, 230, 117},
  {86, 16, 107, 32, 244, 204, 161, 111, 229, 228, 22, 122, 78, 224, 158, 224, 220, 67},
  {86, 16, 50, 28, 119, 47, 164, 84, 21, 136, 113, 73, 29, 135, 225, 209, 192, 162},
  {86, 16, 75, 240, 13, 135, 224, 111, 78, 207, 206, 164, 150, 152, 25, 172, 24, 171},
  {86, 0, 75, 240, 13, 135, 224, 111, 78, 207, 206, 164, 150, 152, 25, 172, 24, 171},
  {86, 16, 188, 25, 208, 151, 87, 40, 228, 146, 64, 198, 209, 59, 56, 48, 160, 107},
  {86, 16, 82, 69, 37, 171, 77, 87, 253, 116, 253, 223, 167, 62, 49, 198, 156, 214},
  {86, 16, 25, 36, 115, 194, 226, 103, 232, 63, 157, 174, 61, 69, 43, 177, 214, 202},
  {86, 16, 249, 66, 174, 36, 76, 62, 141, 250, 253, 142, 8, 118, 132, 128, 179, 106},
  {86, 16, 99, 251, 48, 175, 99, 91, 170, 54, 5, 1, 12, 57, 193, 10, 214, 160},
  {86, 16, 56, 56, 75, 44, 55, 43, 226, 110, 241, 27, 132, 68, 75, 77, 49, 149},
  {86, 16, 207, 41, 139, 122, 93, 42, 214, 225, 109, 138, 187, 80, 116, 166, 90, 166},
  {86, 16, 29, 241, 154, 111, 81, 193, 81, 28, 176, 250, 173, 187, 204, 179, 248, 241},
  {86, 16, 252, 223, 121, 92, 226, 98, 247, 67, 3, 9, 200, 147, 33, 90, 147, 114},
  {86, 16, 137, 242, 69, 23, 172, 166, 2, 28, 149, 24, 124, 135, 25, 134, 113, 240},
  {86, 3, 30, 207, 194, 23, 172, 166, 2, 28, 149, 24, 124, 135, 25, 134, 113, 240},
  {86, 16, 164, 100, 243, 74, 148, 62, 11, 84, 148, 87, 12, 142, 163, 164, 209, 81},
  {86, 16, 201, 134, 170, 155, 202, 232, 19, 117, 210, 58, 229, 197, 108, 203, 236, 32},
  {86, 16, 6, 151, 70, 178, 194, 91, 33, 97, 139, 150, 189, 128, 216, 200, 96, 215},
  {86, 16, 183, 50, 83, 119, 229, 34, 48, 178, 162, 255, 103, 106, 81, 74, 255, 181},
  {86, 16, 142, 93, 218, 56, 225, 188, 123, 159, 87, 253, 44, 126, 212, 224, 237, 130},
  {86, 16, 155, 133, 175, 122, 166, 82, 48, 92, 167, 206, 197, 253, 128, 137, 94, 252},
  {86, 16, 58, 183, 228, 77, 213, 132, 237, 52, 243, 47, 71, 126, 96, 18, 96, 52},
  {86, 16, 218, 109, 147, 147, 103, 86, 83, 56, 54, 115, 23, 210, 80, 210, 201, 180},
  {86, 16, 33, 156, 42, 244, 50, 208, 70, 124, 22, 157, 8, 112, 174, 4, 9, 69},
  {86, 16, 12, 156, 249, 72, 21, 132, 29, 215, 157, 48, 147, 129, 213, 195, 46, 196},
  {86, 2, 167, 92, 249, 72, 21, 132, 29, 215, 157, 48, 147, 129, 213, 195, 46, 196},
  {86, 16, 240, 155, 200, 2, 128, 27, 232, 211, 226, 210, 218, 70, 87, 225, 170, 128},
  {86, 16, 103, 212, 8, 169, 229, 228, 22, 180, 29, 185, 112, 77, 3, 102, 158, 170},
  {86, 16, 31, 180, 4, 118, 126, 198, 70, 61, 114, 153, 70, 207, 128, 237, 125, 49},
  {86, 16, 196, 101, 3, 83, 231, 123, 152, 27, 79, 119, 95, 138, 245, 158, 2, 202},
  {86, 16, 73, 99, 196, 185, 31, 34, 201, 116, 152, 233, 246, 9, 180, 16, 191, 138},
  {86, 16, 39, 241, 89, 101, 181, 21, 48, 214, 236, 21, 87, 181, 207, 241, 138, 197},
  {86, 16, 20, 170, 17, 162, 201, 33, 142, 61, 78, 234, 62, 9, 29, 102, 246, 130},
  {86, 16, 19, 208, 218, 252, 234, 242, 122, 99, 149, 161, 236, 205, 222, 234, 72, 12},
  {86, 16, 77, 80, 84, 158, 151, 16, 168, 177, 114, 7, 197, 66, 57, 251, 41, 38},
  {86, 16, 131, 187, 98, 169, 126, 18, 204, 209, 2, 109, 26, 199, 26, 32, 181, 2},
  {86, 16, 148, 121, 63, 11, 213, 21, 17, 185, 228, 193, 111, 168, 216, 243, 155, 230},
  {86, 16, 47, 110, 137, 101, 232, 14, 221, 43, 220, 152, 251, 254, 79, 161, 137, 125},
  {86, 16, 230, 212, 75, 244, 80, 113, 204, 107, 6, 175, 134, 181, 181, 151, 196, 94},
  {86, 16, 239, 203, 113, 117, 93, 242, 76, 254, 9, 142, 107, 205, 64, 3, 162, 29},
  {86, 16, 98, 56, 116, 54, 212, 240, 108, 148, 143, 106, 116, 211, 147, 143, 64, 230},
  {86, 16, 235, 141, 53, 90, 197, 186, 47, 40, 62, 66, 171, 41, 159, 216, 221, 160},
  {86, 16, 237, 138, 6, 112, 35, 52, 121, 59, 40, 219, 134, 229, 32, 13, 102, 147},
  {86, 16, 78, 145, 149, 182, 228, 38, 124, 226, 158, 88, 11, 201, 28, 157, 127, 131},
  {86, 16, 231, 58, 157, 70, 93, 28, 117, 67, 69, 93, 161, 83, 101, 170, 225, 187},
};


int i = 0;

void setup() {
  // put your setup code here, to run once:
  Serial.begin(115200);
  Serial1.begin(115200);
}

uint8_t receive_buffer[3];

void loop() 
{
  int result = uart_read(UART1_BASE, receive_buffer, 3, 10000);
  if (result == 0)
  {
    if(receive_buffer[0] == 87)
    {
      uint8_t row_index = receive_buffer[2];
      Serial.print("row ");
      Serial.println(row_index);

      Serial.print(fob_to_car[row_index][0]);
      Serial.print(" ");
      Serial.print(fob_to_car[row_index][1]);
      Serial.print(" ");
      for (int ii = 0; ii < fob_to_car[row_index][1]; ii++)
      {
        Serial.print(fob_to_car[row_index][ii+2]);
        Serial.print(" ");
      }
      Serial.println(" ");

      uint8_t bytes_to_send = fob_to_car[row_index][1] + 2;
      uart_write(UART1_BASE, fob_to_car[row_index], bytes_to_send);
    }
    else{
      Serial.println("Mistake");
    }
  }
  else{
    Serial.println("Didn't receive");
  }
}
