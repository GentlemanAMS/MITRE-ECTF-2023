<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PARED - Purdue: car/src/firmware.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PARED - Purdue
   </div>
   <div id="projectbrief">Mitre eCTF 2023 - Purdue</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_733846acb3c736eedaa0fe551b6fb44f.html">car</a></li><li class="navelem"><a class="el" href="dir_f34a5d23aa2b487797b80638f9a4bf44.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">firmware.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Firmware for the car.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;inc/hw_flash.h&quot;</code><br />
<code>#include &quot;inc/hw_ints.h&quot;</code><br />
<code>#include &quot;inc/hw_memmap.h&quot;</code><br />
<code>#include &quot;driverlib/eeprom.h&quot;</code><br />
<code>#include &quot;driverlib/flash.h&quot;</code><br />
<code>#include &quot;driverlib/gpio.h&quot;</code><br />
<code>#include &quot;driverlib/interrupt.h&quot;</code><br />
<code>#include &quot;driverlib/pin_map.h&quot;</code><br />
<code>#include &quot;driverlib/rom.h&quot;</code><br />
<code>#include &quot;driverlib/sysctl.h&quot;</code><br />
<code>#include &quot;driverlib/timer.h&quot;</code><br />
<code>#include &quot;eeprom_wrapper.h&quot;</code><br />
<code>#include &quot;wrapper.h&quot;</code><br />
<code>#include &quot;board_link.h&quot;</code><br />
<code>#include &quot;feature_list.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for firmware.c:</div>
<div class="dyncontent">
<div class="center"><img src="car_2src_2firmware_8c__incl.png" border="0" usemap="#acar_2src_2firmware_8c" alt=""/></div>
<map name="acar_2src_2firmware_8c" id="acar_2src_2firmware_8c">
<area shape="rect" title="Firmware for the car." alt="" coords="1041,5,1167,31"/>
<area shape="rect" title=" " alt="" coords="5,79,80,104"/>
<area shape="rect" title=" " alt="" coords="105,79,170,104"/>
<area shape="rect" title=" " alt="" coords="194,79,259,104"/>
<area shape="rect" title=" " alt="" coords="284,79,391,104"/>
<area shape="rect" title=" " alt="" coords="415,79,513,104"/>
<area shape="rect" title=" " alt="" coords="538,79,670,104"/>
<area shape="rect" title=" " alt="" coords="695,79,820,104"/>
<area shape="rect" title=" " alt="" coords="845,79,955,104"/>
<area shape="rect" title=" " alt="" coords="980,79,1087,104"/>
<area shape="rect" title=" " alt="" coords="1111,79,1241,104"/>
<area shape="rect" title=" " alt="" coords="1265,79,1396,104"/>
<area shape="rect" title=" " alt="" coords="1420,79,1524,104"/>
<area shape="rect" title=" " alt="" coords="1548,79,1665,104"/>
<area shape="rect" title=" " alt="" coords="1690,79,1801,104"/>
<area shape="rect" title=" " alt="" coords="1825,79,1953,104"/>
<area shape="rect" title=" " alt="" coords="1978,79,2057,104"/>
<area shape="rect" title=" " alt="" coords="2081,79,2173,104"/>
<area shape="rect" title=" " alt="" coords="2197,79,2294,104"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct____attribute____.html">__attribute__</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2a54f776db39325a3b559286f19a66c9"><td class="memItemLeft" align="right" valign="top"><a id="a2a54f776db39325a3b559286f19a66c9" name="a2a54f776db39325a3b559286f19a66c9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UNLOCK_EEPROM_LOC</b>&#160;&#160;&#160;0x7C0</td></tr>
<tr class="separator:a2a54f776db39325a3b559286f19a66c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7512fca4bef33ba90f28b8a7f1b14326"><td class="memItemLeft" align="right" valign="top"><a id="a7512fca4bef33ba90f28b8a7f1b14326" name="a7512fca4bef33ba90f28b8a7f1b14326"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UNLOCK_EEPROM_SIZE</b>&#160;&#160;&#160;64</td></tr>
<tr class="separator:a7512fca4bef33ba90f28b8a7f1b14326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc2c2e56b545cd166f60810342ee33c5"><td class="memItemLeft" align="right" valign="top"><a id="afc2c2e56b545cd166f60810342ee33c5" name="afc2c2e56b545cd166f60810342ee33c5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ENCRYPT_STRING_LEN</b>&#160;&#160;&#160;48</td></tr>
<tr class="separator:afc2c2e56b545cd166f60810342ee33c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a699c319cd35efdf2e08000d31b032"><td class="memItemLeft" align="right" valign="top"><a id="a50a699c319cd35efdf2e08000d31b032" name="a50a699c319cd35efdf2e08000d31b032"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FEATURE_PSSWD_LEN</b>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a50a699c319cd35efdf2e08000d31b032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad53ebb3b937379a76987e23c04101900"><td class="memItemLeft" align="right" valign="top"><a id="ad53ebb3b937379a76987e23c04101900" name="ad53ebb3b937379a76987e23c04101900"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FOB_UNLOCK_RESP_LEN</b>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ad53ebb3b937379a76987e23c04101900"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a932556dc0435011d6235977e681a19bd"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bd">car_state_t</a> { <br />
&#160;&#160;<a class="el" href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bdaaade5e53e88cf231292cd1142cce2afe">STATE_IDLE</a>
, <a class="el" href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bdae334d166e18793e66d299c0266539a09">STATE_LOCKED</a>
, <a class="el" href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bda23857280880480b48a5355ee6f6d07b1">STATE_UNLOCKED</a>
, <a class="el" href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bdae032c9e46bddca0f988852ead9245feb">STATE_SEND_ENC</a>
, <br />
&#160;&#160;<a class="el" href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bda3866d133ba3d41c1310fdd87f2a652db">STATE_RECV_RESP</a>
, <a class="el" href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bdae9d8087537a0960d0a6accc5cffc88c3">STATE_DEFENSE</a>
, <a class="el" href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bda7e4e3394955e7562263b31e88351b137">STATE_IN_PROGRESS</a>
<br />
 }</td></tr>
<tr class="memdesc:a932556dc0435011d6235977e681a19bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">States for the car.  <a href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bd">More...</a><br /></td></tr>
<tr class="separator:a932556dc0435011d6235977e681a19bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a549247b4fce903e7e6bfa3f96bde2e80"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#a549247b4fce903e7e6bfa3f96bde2e80">unlockCar</a> (void)</td></tr>
<tr class="memdesc:a549247b4fce903e7e6bfa3f96bde2e80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the car.  <br /></td></tr>
<tr class="separator:a549247b4fce903e7e6bfa3f96bde2e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12fc6703d417ccad2ac75fee509e0295"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#a12fc6703d417ccad2ac75fee509e0295">startCar</a> (void)</td></tr>
<tr class="memdesc:a12fc6703d417ccad2ac75fee509e0295"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for the fob to send a start message.  <br /></td></tr>
<tr class="separator:a12fc6703d417ccad2ac75fee509e0295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f47b78f43d7415bafd4263935bc3601"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#a9f47b78f43d7415bafd4263935bc3601">wait_for_unlock</a> ()</td></tr>
<tr class="memdesc:a9f47b78f43d7415bafd4263935bc3601"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Idle state of the car, waits for a message from the fob.  <br /></td></tr>
<tr class="separator:a9f47b78f43d7415bafd4263935bc3601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03ce2fdc3aa9f416ec6b6e9544e26590"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#a03ce2fdc3aa9f416ec6b6e9544e26590">wait_for_response</a> ()</td></tr>
<tr class="memdesc:a03ce2fdc3aa9f416ec6b6e9544e26590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for the fob to respond to the challenge.  <br /></td></tr>
<tr class="separator:a03ce2fdc3aa9f416ec6b6e9544e26590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7aa11065d01c34887b86e6b5e98592a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#ab7aa11065d01c34887b86e6b5e98592a">send_encrpyted_challenge</a> ()</td></tr>
<tr class="memdesc:ab7aa11065d01c34887b86e6b5e98592a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles unlocking requests from the fob.  <br /></td></tr>
<tr class="separator:ab7aa11065d01c34887b86e6b5e98592a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e3049bb769face11451386ec566d6e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#a9e3049bb769face11451386ec566d6e7">defense_mode</a> ()</td></tr>
<tr class="memdesc:a9e3049bb769face11451386ec566d6e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defense mode for the car.  <br /></td></tr>
<tr class="separator:a9e3049bb769face11451386ec566d6e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a414dc170e255ec27fd5d0ba8c4a6f5dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#a414dc170e255ec27fd5d0ba8c4a6f5dd">sendAckSuccess</a> (void)</td></tr>
<tr class="memdesc:a414dc170e255ec27fd5d0ba8c4a6f5dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an ACK success message to the fob.  <br /></td></tr>
<tr class="separator:a414dc170e255ec27fd5d0ba8c4a6f5dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c4ec1f7ae9fd5abc508358335054259"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#a0c4ec1f7ae9fd5abc508358335054259">sendAckFailure</a> (void)</td></tr>
<tr class="memdesc:a0c4ec1f7ae9fd5abc508358335054259"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an ACK failure message to the fob.  <br /></td></tr>
<tr class="separator:a0c4ec1f7ae9fd5abc508358335054259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top"><a id="a840291bc02cba5474a4cb46a9b9566fe" name="a840291bc02cba5474a4cb46a9b9566fe"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main loop for the car. <br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a909ef111efbfc4307fcc8a5e43a53ac7"><td class="memItemLeft" align="right" valign="top"><a id="a909ef111efbfc4307fcc8a5e43a53ac7" name="a909ef111efbfc4307fcc8a5e43a53ac7"></a>
<a class="el" href="structcar__t.html">car_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>car</b></td></tr>
<tr class="separator:a909ef111efbfc4307fcc8a5e43a53ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17db0310bf4677d46e0ea3d3f97f330d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="car_2src_2firmware_8c.html#a17db0310bf4677d46e0ea3d3f97f330d">feature_hashes</a> []</td></tr>
<tr class="separator:a17db0310bf4677d46e0ea3d3f97f330d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac89f1725cc51ad4aab679a07abba1134"><td class="memItemLeft" align="right" valign="top"><a id="ac89f1725cc51ad4aab679a07abba1134" name="ac89f1725cc51ad4aab679a07abba1134"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>feature_hashes_len</b> = FEATURE_KEY_1_HASH_LEN</td></tr>
<tr class="separator:ac89f1725cc51ad4aab679a07abba1134"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Firmware for the car. </p>
<dl class="section author"><dt>Author</dt><dd>Purdue eCTF Team </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023</dd></dl>
<p>This file contains the firmware for the car.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2023 Purdue eCTF Team </dd></dl>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a932556dc0435011d6235977e681a19bd" name="a932556dc0435011d6235977e681a19bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a932556dc0435011d6235977e681a19bd">&#9670;&#160;</a></span>car_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="car_2src_2firmware_8c.html#a932556dc0435011d6235977e681a19bd">car_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>States for the car. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a932556dc0435011d6235977e681a19bdaaade5e53e88cf231292cd1142cce2afe" name="a932556dc0435011d6235977e681a19bdaaade5e53e88cf231292cd1142cce2afe"></a>STATE_IDLE&#160;</td><td class="fielddoc"><p>Idle state </p>
</td></tr>
<tr><td class="fieldname"><a id="a932556dc0435011d6235977e681a19bdae334d166e18793e66d299c0266539a09" name="a932556dc0435011d6235977e681a19bdae334d166e18793e66d299c0266539a09"></a>STATE_LOCKED&#160;</td><td class="fielddoc"><p>Locked state </p>
</td></tr>
<tr><td class="fieldname"><a id="a932556dc0435011d6235977e681a19bda23857280880480b48a5355ee6f6d07b1" name="a932556dc0435011d6235977e681a19bda23857280880480b48a5355ee6f6d07b1"></a>STATE_UNLOCKED&#160;</td><td class="fielddoc"><p>Unlocked state </p>
</td></tr>
<tr><td class="fieldname"><a id="a932556dc0435011d6235977e681a19bdae032c9e46bddca0f988852ead9245feb" name="a932556dc0435011d6235977e681a19bdae032c9e46bddca0f988852ead9245feb"></a>STATE_SEND_ENC&#160;</td><td class="fielddoc"><p>Send encrypted challenge state </p>
</td></tr>
<tr><td class="fieldname"><a id="a932556dc0435011d6235977e681a19bda3866d133ba3d41c1310fdd87f2a652db" name="a932556dc0435011d6235977e681a19bda3866d133ba3d41c1310fdd87f2a652db"></a>STATE_RECV_RESP&#160;</td><td class="fielddoc"><p>Receive response state </p>
</td></tr>
<tr><td class="fieldname"><a id="a932556dc0435011d6235977e681a19bdae9d8087537a0960d0a6accc5cffc88c3" name="a932556dc0435011d6235977e681a19bdae9d8087537a0960d0a6accc5cffc88c3"></a>STATE_DEFENSE&#160;</td><td class="fielddoc"><p>Defense mode state </p>
</td></tr>
<tr><td class="fieldname"><a id="a932556dc0435011d6235977e681a19bda7e4e3394955e7562263b31e88351b137" name="a932556dc0435011d6235977e681a19bda7e4e3394955e7562263b31e88351b137"></a>STATE_IN_PROGRESS&#160;</td><td class="fielddoc"><p>In progress state </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9e3049bb769face11451386ec566d6e7" name="a9e3049bb769face11451386ec566d6e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e3049bb769face11451386ec566d6e7">&#9670;&#160;</a></span>defense_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void defense_mode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defense mode for the car. </p>
<dl class="section note"><dt>Note</dt><dd>Car will sleep for 4 seconds and then return to the locked state </dd></dl>

</div>
</div>
<a id="ab7aa11065d01c34887b86e6b5e98592a" name="ab7aa11065d01c34887b86e6b5e98592a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7aa11065d01c34887b86e6b5e98592a">&#9670;&#160;</a></span>send_encrpyted_challenge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_encrpyted_challenge </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles unlocking requests from the fob. </p>
<dl class="section note"><dt>Note</dt><dd>This function sends a challenge to the fob, then sets the car state to STATE_RECV_RESP </dd></dl>

</div>
</div>
<a id="a0c4ec1f7ae9fd5abc508358335054259" name="a0c4ec1f7ae9fd5abc508358335054259"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c4ec1f7ae9fd5abc508358335054259">&#9670;&#160;</a></span>sendAckFailure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendAckFailure </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends an ACK failure message to the fob. </p>
<p>Sends unsuccessful ACK message. </p>

</div>
</div>
<a id="a414dc170e255ec27fd5d0ba8c4a6f5dd" name="a414dc170e255ec27fd5d0ba8c4a6f5dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a414dc170e255ec27fd5d0ba8c4a6f5dd">&#9670;&#160;</a></span>sendAckSuccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendAckSuccess </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends an ACK success message to the fob. </p>
<p>Sends successful ACK message. </p>

</div>
</div>
<a id="a12fc6703d417ccad2ac75fee509e0295" name="a12fc6703d417ccad2ac75fee509e0295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12fc6703d417ccad2ac75fee509e0295">&#9670;&#160;</a></span>startCar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startCar </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for the fob to send a start message. </p>
<p>Starts the car after the car is unlocked.</p>
<dl class="section note"><dt>Note</dt><dd>This function handles the start message after the car has been unlocked, verifies the feature list sent by the fob, then prints the unlock message and feature list to the host. It then sets the car state to STATE_LOCKED again. </dd></dl>

</div>
</div>
<a id="a549247b4fce903e7e6bfa3f96bde2e80" name="a549247b4fce903e7e6bfa3f96bde2e80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a549247b4fce903e7e6bfa3f96bde2e80">&#9670;&#160;</a></span>unlockCar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unlockCar </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlocks the car. </p>
<dl class="section note"><dt>Note</dt><dd>This function is called when the button is pressed </dd></dl>

</div>
</div>
<a id="a03ce2fdc3aa9f416ec6b6e9544e26590" name="a03ce2fdc3aa9f416ec6b6e9544e26590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03ce2fdc3aa9f416ec6b6e9544e26590">&#9670;&#160;</a></span>wait_for_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wait_for_response </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for the fob to respond to the challenge. </p>
<dl class="section note"><dt>Note</dt><dd>This function sets the car state to STATE_UNLOCKED if the fob responds with the correct response, STATE_DEFENSE otherwise </dd></dl>

</div>
</div>
<a id="a9f47b78f43d7415bafd4263935bc3601" name="a9f47b78f43d7415bafd4263935bc3601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f47b78f43d7415bafd4263935bc3601">&#9670;&#160;</a></span>wait_for_unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wait_for_unlock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Idle state of the car, waits for a message from the fob. </p>
<dl class="section note"><dt>Note</dt><dd>This function sets the car state to STATE_SEND_ENC if a unlock message is received </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a17db0310bf4677d46e0ea3d3f97f330d" name="a17db0310bf4677d46e0ea3d3f97f330d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17db0310bf4677d46e0ea3d3f97f330d">&#9670;&#160;</a></span>feature_hashes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t feature_hashes[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {FEATURE_KEY_1_HASH, FEATURE_KEY_2_HASH,</div>
<div class="line">                             FEATURE_KEY_3_HASH}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
